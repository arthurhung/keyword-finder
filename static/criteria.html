<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Mon Jan 25 2021 07:50:14 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="6009a7e13de0915e89e8d7d7" data-wf-site="6006f794a9167af080d669c2">

<head>
  <meta charset="utf-8">
  <title>Criteria</title>
  <meta content="Criteria" property="og:title">
  <meta content="Criteria" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="static/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="static/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="static/css/crawler-0db128.webflow.css" rel="stylesheet" type="text/css">
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script
    type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
  <link href="static/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="static/images/webclip.png" rel="apple-touch-icon">
</head>

<body>
  <div class="dialogue-box_wrapper">
    <div class="dialogue-box_title">查詢中</div>
    <div class="dialogue-box_content">本公主貓正在愛做不做地幫您查詢中，稍等一下吧！</div>
  </div>
  <div class="header">
    <div class="navbar_wrapper">
      <div class="brand_wrapper">
        <a href="#" class="brand w-nav-brand"><img src="static/images/mimmy_logo.jpeg" loading="lazy"
            sizes="(max-width: 479px) 15vw, (max-width: 767px) 10vw, 6vw"
            srcset="static/images/mimmy_logo-p-500.jpeg 500w, static/images/mimmy_logo-p-800.jpeg 800w, static/images/mimmy_logo.jpeg 1080w"
            alt="" class="logo_img_sk"></a>
        <div class="site_title">第一可愛小貓貓爬文系統</div>
      </div>
      <div data-collapse="medium" data-animation="default" data-duration="400" role="banner" class="navbar w-nav">
        <nav role="navigation" class="nav-menu w-nav-menu">
          <a href="https://www.instagram.com/mimmythekitten" class="nav-link w-inline-block">
            <div class="nav-link_text">Follow</div>
          </a>
        </nav>
        <div class="menu-button w-nav-button">
          <div class="icon w-icon-nav-menu"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="search-criteria_wrapper">
      <div class="search-criteria_title">
        <div class="search-criteria_title_text">搜尋條件</div>
      </div>
      <div class="search-criteria_input-area">
        <div class="form-block w-form">
          <form id="email-form" name="email-form" data-name="Email Form" class="form">
            <div class="search-criteria_item-wrapper"><label class="input_field-label">來源</label><select id="Source"
                name="Source" data-name="Source" class="select-field w-select">
                <option value="PTT">PTT</option>
                <option value="Dcard">Dcard</option>
                <option value="Bnext">數位時代</option>
                <option value="iThome">iThome</option>
                <option value="Yahoo">奇摩新聞</option>
              </select></div>
            <div id="board" class="search-criteria_item-wrapper"><label for="Board-2"
                class="input_field-label">看板</label><select id="Board-List" name="Board" data-name="Board"
                class="select-field w-select">
                <option value="Bank_Service">Bank_Service</option>
                <option value="Gossiping">Gossiping</option>
                <option value="creditcard">creditcard</option>
                <option value="Lifeismoney">Lifeismoney</option>
                <option value="Insurance">Insurance</option>
                <option value="Broker">Broker</option>
              </select></div>
            <div class="search-criteria_item-wrapper"><label class="input_field-label">關鍵字</label><input type="text"
                class="input_text-field w-input" autofocus="true" maxlength="256" name="keyword_main-2"
                data-name="Keyword Main 2" placeholder="主要關鍵字" id="keyword_main-2" required=""><input type="text"
                class="input_text-field w-input" autofocus="true" maxlength="256" name="keyword_additional-2"
                data-name="Keyword Additional 2" placeholder="且包含下列任一關鍵字(以逗號分隔)" id="keyword_additional-2"><input
                type="text" class="input_text-field w-input" autofocus="true" maxlength="256" name="keyword_exclusion-2"
                data-name="Keyword Exclusion 2" placeholder="且排除下列所有關鍵字(以逗號分隔)" id="keyword_exclusion-2"></div>
            <div class="search-criteria_item-wrapper"><label class="input_field-label">日期區間</label><label
                class="radio-button-field w-radio"><input type="radio" data-name="date" id="today" name="date"
                  value="today" class="w-form-formradioinput radio-button w-radio-input"><span for="today"
                  class="radio-button-label w-form-label">今日</span></label><label
                class="radio-button-field w-radio"><input type="radio" data-name="date" id="period" name="date"
                  value="period" class="w-form-formradioinput radio-button w-radio-input"><span for="period"
                  class="radio-button-label w-form-label">區間</span></label>
              <div class="date-input_period-wrapper">
                <div class="date-input_period_wrapper">
                  <div class="date-input_from-wrapper"><input type="text" class="date-input_text-field w-input"
                      maxlength="256" name="date_start" data-name="date_start" placeholder="YYYY/MM/DD" id="date_start"
                      value="20210108">
                    <div class="date-input_period_text">至</div>
                  </div><input type="text" class="date-input_text-field w-input" maxlength="256" name="date_start-2"
                    data-name="Date Start 2" placeholder="YYYY/MM/DD" id="date_start-2" value="20210120">
                </div>
              </div>
            </div>
          </form>
          <div class="w-form-done"></div>
          <div class="w-form-fail"></div>
        </div>
        <div class="search-criteria_submit-wrapper">
          <button type="button" class="search-criteria_submit-button w-button">查詢</button>
          <!-- <button type="button" class="search-criteria_submit-button w-button">查詢</button> -->
          <!-- <button type="button" disabled>Click Me!</button> -->
        </div>
      </div>
    </div>
  </div>


  <div class="main">
    <div class="search-criteria_wrapper">
      <div class="search-criteria_title">
        <div class="search-criteria_title_text">查詢結果</div>
      </div>
      <!-- <div class="result-summary_wrapper">
        <div class="result-summary_tr w-row">
          <div class="result-summary_th w-col w-col-4 w-col-small-4 w-col-tiny-4">
            <div class="result-summary_th_text">筆數：</div>
          </div>
          <div class="result-summary_td w-col w-col-8 w-col-small-8 w-col-tiny-8">
            <div class="result-summary_td_wrapper">
              <div class="result-summary_text">共</div>
              <div id="result_count" class="result-summary_value">100</div>
              <div class="result-summary_text">筆資料</div>
            </div>
          </div>
        </div>
        <div class="result-summary_tr w-row">
          <div class="result-summary_th w-col w-col-4 w-col-small-4 w-col-tiny-4">
            <div class="result-summary_th_text">查詢區間：</div>
          </div>
          <div class="result-summary_td w-col w-col-8 w-col-small-8 w-col-tiny-8">
            <div class="result-summary_td_wrapper">
              <div id="result_start-date" class="result-summary_value">2021/01/01</div>
              <div class="result-summary_text">～</div>
              <div id="result_end-date" class="result-summary_value">2021/01/22</div>
            </div>
          </div>
        </div>
      </div> -->
      <div class="result_output-list_wrapper">
        <!--  -->
        <!-- <div class="result-output_tr w-row">
          <div class="result_output-list_th w-col w-col-1">
            <div class="result_output-list_number">1</div>
          </div>
          <div class="result_output-list_td_source w-col w-col-2">
            <div class="result_output-list_source">PTT</div>
          </div>
          <div class="result_output-list_td_article-title w-col w-col-4">
            <a href="https://www.google.com" target="_blank" class="result_output-list_article_link w-inline-block">
              <div class="result_output-list_article-title">文章標題</div>
            </a>
          </div>
          <div class="result_output-list_td_date w-col w-col-2">
            <div class="result_output-list_date">2021/01/22</div>
          </div>
          <div class="result_output-list_td_board w-col w-col-2">
            <div class="result_output-list_board">Gossiping</div>
          </div>
          <div class="result_output-list_td_author w-col w-col-1">
            <div class="result_output-list_author">okcool</div>
          </div>
        </div> -->

        <!--  -->
      </div>
      <!-- <div class="result_action_wrapper">
        <a href="#" class="search-criteria_submit-button w-button">下載</a>
      </div> -->
    </div>
  </div>


  <div class="footer">
    <div class="footer_copyright">Copyright mimmythekitten 2021</div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6006f794a9167af080d669c2"
    type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
  <script src="static/js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
<script>
  function randString(x) {
    var s = "";
    while (s.length < x && x > 0) {
      var r = Math.random();
      s += (r < 0.1 ? Math.floor(r * 100) : String.fromCharCode(Math.floor(r * 26) + (r > 0.5 ? 97 : 65)));
    }
    return s;
  }

  function update_ui() {
    if (conn == null) {
      $('#status').text('disconnected');
      $('#connect').html('Connect');
    } else {
      $('#status').text('connected (' + conn.protocol + ')');
      $('#connect').html('Disconnect');
    }
  }
  var conn = null;
  var id = randString(16);
  var count = 0

  String.prototype.format = function () {
    var a = this;
    for (var k in arguments) {
      a = a.replace(new RegExp("\\{" + k + "\\}", 'g'), arguments[k]);
    }
    return a
  }

  function connect() {
    disconnect();
    // var wsUri = (window.location.protocol=='https:'&&'wss://'||'ws://')+window.location.host;
    var wsUri = 'ws://127.0.0.1:5000/socket/' + id
    conn = new WebSocket(wsUri);
    console.log('Connecting...');
    conn.onopen = function () {
      console.log('Connected.');


    };
    conn.onmessage = function (e) {
      if (e.data == 'done') {
        console.log('Received: ' + e.data);
        $('.search-criteria_submit-button.w-button')[0].style.backgroundColor = "#d99c9c"
        $('.search-criteria_submit-button.w-button')[0].innerText = "查詢"
        $('.search-criteria_submit-button.w-button')[0].disabled = false

      } else {
        count += 1
        var data = JSON.parse(e.data)
        var html = ' <div class="result-output_tr w-row"> <div class="result_output-list_th w-col w-col-1"> <div class="result_output-list_number">{0}</div> </div> <div class="result_output-list_td_source w-col w-col-2"> <div class="result_output-list_source">PTT</div> </div> <div class="result_output-list_td_article-title w-col w-col-4"> <a href="{1}" target="_blank" class="result_output-list_article_link w-inline-block"> <div class="result_output-list_article-title">{2}</div> </a> </div> <div class="result_output-list_td_date w-col w-col-2"> <div class="result_output-list_date">{3}</div> </div> <div class="result_output-list_td_board w-col w-col-2"> <div class="result_output-list_board">{4}</div> </div> <div class="result_output-list_td_author w-col w-col-1"> <div class="result_output-list_author">{5}</div> </div> </div>'.format(count, data.url, data.article_title, data.date, data.board, data.author)
        $('.result_output-list_wrapper').append(html)
      }

    };
    conn.onclose = function () {
      console.log('Disconnected.');
    };
  }
  function disconnect() {
    if (conn != null) {
      console.log('Disconnecting...');
      conn.close();
    }
  }
  connect()

  $('.search-criteria_submit-button.w-button').click(function () {

    if (conn == null) {
      connect();
    }

    var source = $('#Source').val();
    var board = $('#Board-List').val();
    var key_word = $('#keyword_main-2').val();

    var today = $('input[name ="date"]')[0].checked
    if (today == true) {
      var start_date = '';
      var end_date = '';
    } else {
      var start_date = $('input[name ="date_start"]').val();
      var end_date = $('input[name ="date_start-2"]').val();
    }

    console.log('Source: ' + source);
    console.log('Board: ' + board);
    console.log('Key word: ' + key_word);
    console.log('Start Date: ' + start_date);
    console.log('End Date: ' + end_date);

    var req = {
      type: source,
      board: board,
      start_date: start_date,
      end_date: end_date,
      key_word: key_word
    }
    conn.send(JSON.stringify(req));

    $('.search-criteria_submit-button.w-button')[0].style.backgroundColor = "#808080"
    $('.search-criteria_submit-button.w-button')[0].innerText = "查詢中"
    $('.search-criteria_submit-button.w-button')[0].disabled = true

  });


</script>

</html>